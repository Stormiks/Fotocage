(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ea8d00e"],{"23ff":function(e,t,i){},3612:function(e,t,i){},"5b4a":function(e,t,i){"use strict";i("9b23")},"6e26":function(e,t,i){},8970:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"upload-images"},[i("div",{staticClass:"form__upload flex flex-col md:flex-row  md:w-11/12 lgs:w-3/4 mx-auto p-2"},[i("div",{staticClass:"form__upload__input",class:{form__list_visible:e.files.length>1}},[i("UploadImagesInput",{class:{form__list_show:e.showListUploadImages},attrs:{"files-count":e.files.length,"accept-formats-file":e.acceptFormats.join(", "),"first-file-name":e.files[0]?e.files[0].name:""},on:{"change-input":e.onChangeInputUploadFile,"visible-list-files":e.onShowListUploadImages}}),i("UploadListImages",{directives:[{name:"show",rawName:"v-show",value:e.showListUploadImages,expression:"showListUploadImages"}],attrs:{"list-names":e.listNameFiles},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.text;return[e._v(" "+e._s(i)+" ")]}}])})],1),i("button",{staticClass:"btn primary px-5 py-1 mt-4 md:mt-0 md:ml-3",attrs:{disabled:!e.files.length,type:"button"},on:{click:function(t){return t.stopPropagation(),e.onUpload.apply(null,arguments)}}},[e._v("Загрузить")])]),i("PreviewListFile",{directives:[{name:"show",rawName:"v-show",value:e.files.length,expression:"files.length"}],attrs:{"list-files":e.files},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.index,a=t.title,n=t.size,l=t.src;return[i("PreviewImage",{key:"upload-image-"+a.length+"-"+n,ref:"image-download-"+s,attrs:{title:e.filesInfo[s].title,name:e.filesInfo[s].name,size:n,src:l,description:e.filesInfo[s].description},on:{"preview-remove":function(t){return e.onDeleteDownloadFile(t,s)},"update-preview-info":function(t){return e.onUpdatePreviewInfo(t,s)}}})]}}])})],1)},a=[],n=(i("14d9"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"input_box flex flex-wrap md:flex-nowrap items-center justify-between w-full relative rounded-md px-2 py-1",class:{"mb-10 sm:mb-0":0===e.filesCount}},[i("input",{attrs:{type:"file",id:e.idInputFile,multiple:"",accept:e.acceptFormatsFile},on:{change:function(t){return e.$emit("change-input",t)}}}),i("span",{staticClass:"form__upload__image image_title"},[0===e.filesCount?[i("span",{staticClass:"text-gray-400 absolute sm:static w-full top-full"},[e._v("Выберите файлы для загрузки с вашего компьютера")])]:1===e.filesCount?[e._v(" "+e._s(e.firstFileName)+" ")]:e.filesCount>1?[i("span",{on:{click:function(t){return t.stopPropagation(),e.$emit("visible-list-files")}}},[e._v(" Файлов для загрузки: "+e._s(e.filesCount)+"шт ")])]:e._e()],2),i("button",{staticClass:"btn py-1 px-3",on:{click:function(t){return t.stopPropagation(),e.onShowWindowUploadFile.apply(null,arguments)}}},[e._v("Открыть")])])}),l=[],o={name:"UploadImagesInput",props:{idInputFile:{type:String,default:"uploadImage"},acceptFormatsFile:{type:String,default:".jpg, .jpeg"},firstFileName:{type:String,default:""},filesCount:{type:Number,default:0}},methods:{onShowWindowUploadFile(){return document.getElementById(this.idInputFile).click()}}},r=o,d=(i("db1e"),i("2877")),c=Object(d["a"])(r,n,l,!1,null,"4c324c5b",null),p=c.exports,u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preview py-2 sm:px-2"},[e.listFiles.length?i("ul",{staticClass:"w-full"},e._l(e.listFiles,(function(t,s){return i("li",{key:"preview-image-"+t.name.length+"-"+t.size,staticClass:"preview__item",class:{"my-2":s>0&&s<e.listFiles.length-1,"mt-0":0===s,"mt-2":1===s&&2==e.listFiles.length,"mb-2":0===s&&2==e.listFiles.length,"mb-0":s===e.listFiles.length-1}},[e._t("default",null,{index:s,title:t.name,size:t.size,src:t.src,description:t.description})],2)})),0):e._e()])},f=[],m={name:"PreviewListFile",props:{listFiles:{type:Array,default:()=>[]}}},g=m,h=(i("d5cb"),Object(d["a"])(g,u,f,!1,null,"1f915866",null)),_=h.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preview_box flex flex-wrap sm:flex-nowrap justify-center px-3 py-2 sm:p-0 "},[i("div",{staticClass:"preview__image"},[e.download?e._e():i("button",{staticClass:"preview__image__remove preview_remove",attrs:{type:"button",disabled:e.download},on:{click:function(t){return e.$emit("preview-remove",{name:e.name})}}},[e._v("×")]),i("div",{staticClass:"preview__image__size preview_size"},[i("span",[e._v(e._s(e.bytesToSize))])]),i("figure",[i("img",{attrs:{src:e.src,alt:e.name}}),i("figcaption",{staticClass:"preview__image__info preview_info mt-0.5"},[i("p",[i("span",{attrs:{title:e.title}},[e._v(e._s(e.name))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.progressDownload>0,expression:"progressDownload > 0"}],staticClass:"preview__progress_box progress_download"},[i("div",{staticClass:"progress_bar",style:{width:e.progressDownload+"%"}}),i("span",[e._v(e._s(e.progressDownload)+"%")])])])])]),i("div",{staticClass:"preview__image__data image__data flex-grow ml-2 py-1"},[i("div",{staticClass:"flex flex-wrap"},[i("strong",{staticClass:"mr-1 whitespace-nowrap"},[e._v("Полное имя:")]),i("span",{attrs:{contenteditable:"false","data-editable-field":"title","data-placeholder":"Кликните, чтобы отредактировать"},on:{click:function(t){return t.stopPropagation(),e.changeStateContenteditable(t,"true")},blur:e.updateContent}},[e._v(e._s(e.titleEdit))])]),i("div",{staticClass:"flex align-center"},[i("strong",{staticClass:"mr-1 whitespace-nowrap"},[e._v("Описание:")]),i("span",{staticClass:"preview__image__desc",attrs:{contenteditable:"false","data-editable-field":"description","data-placeholder":"Кликните, чтобы отредактировать"},on:{click:function(t){return t.stopPropagation(),e.changeStateContenteditable(t,"true")},blur:e.updateContent}},[e._v(e._s(e.descriptionEdit))])])])])},v=[],b={name:"PreviewImage",props:{sizes:{type:Array,default:()=>["Bytes","KB","MB","GB","TB"],validate:e=>Array.isArray(e)},description:{type:String,default:""},title:{type:String,default:""},name:{type:String,default:""},size:Number,src:String},data:()=>({progressDownload:0,download:!1,titleEdit:"",descriptionEdit:""}),watch:{description:{handler:function(e){""!==this.description&&(this.descriptionEdit=e)},immediate:!0},title:{handler:function(e){""!==this.name&&(this.titleEdit=e)},immediate:!0}},computed:{bytesToSize(){const e=this.sizes;if(!this.size)return"0 Byte";const t=parseInt(Math.floor(Math.log(this.size)/Math.log(1024)));return Math.round(this.size/Math.pow(1024,t))+" "+e[t]}},methods:{updateContent(e){const t=e.target.dataset.editableField+"Edit",i=e.target.textContent;this[t]=String(i).trim(),this.$el.querySelectorAll('span[contenteditable="true"').forEach(e=>{e.contentEditable="false"}),this.saveInfo()},changeStateContenteditable(e,t){e.target.contentEditable=t,e.target.focus()},saveInfo(){this.$emit("update-preview-info",{title:this.titleEdit,description:this.descriptionEdit})}}},y=b,I=(i("b50b"),Object(d["a"])(y,w,v,!1,null,"715031fc",null)),C=I.exports,F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form__upload__list px-2"},[e.listNames.length>1?i("ul",{staticClass:"list__images upload__images"},e._l(e.listNames,(function(t,s){return i("li",{key:"upload-image-title-"+s,staticClass:"list__images__item images__title py-0.5"},[e._t("default",null,{text:t})],2)})),0):e._e()])},x=[],S={name:"UploadListImages",props:{listNames:{type:Array,default:()=>[]}}},U=S,E=(i("9d0b"),Object(d["a"])(U,F,x,!1,null,"398d0864",null)),P=E.exports,k=i("365c"),D={name:"ViewsUploadImages",components:{UploadImagesInput:p,PreviewListFile:_,PreviewImage:C,UploadListImages:P},data:()=>({files:[],filesInfo:[],acceptFormats:[".jpg",".jpeg"],showListUploadImages:!1,openModalEditor:!1}),computed:{listNameFiles(){const e=[];return this.files.forEach(t=>e.push(t.name)),e}},methods:{onChangeStateModal(e){this.openModalEditor=e},onUpdatePreviewInfo(e,t){Object.keys(e).some(i=>{this.$set(this.filesInfo[t],String(i),e[i])})},onShowWindowUploadFile(){return document.getElementById(this.idInputFile).click()},onChangeInputUploadFile(e){if(!e.target.files.length)return;const t=Array.from(e.target.files);t.forEach(e=>{e.type.match("image")&&this.addFileToPreview(e)})},addFileToPreview(e){const t=new RegExp(`[.][${this.acceptFormats.join("|")}]+`,"i"),i=e.name.match(t)[0];if(!this.acceptFormats.includes(i))return;const s=new FileReader;s.onload=t=>{const i=t.target.result,s=e.name.substring(0,e.name.lastIndexOf("."));e.src=i,e.download=!1;const a={title:s,name:e.name,description:""};this.filesInfo=[...this.filesInfo,a],this.files=[...this.files,e]},s.readAsDataURL(e)},onDeleteDownloadFile(e,t){e.name&&this.files.splice(t,1)},onShowListUploadImages(){this.showListUploadImages=!this.showListUploadImages},changeDownloadStatus(e,t){this.$set(this.files[e],"download",t),this.$refs["image-download-"+e].download=t},changeProgressDownloadFile(e,t){this.$refs["image-download-"+e].progressDownload=t},onUpload(){this.files.some((e,t)=>{if(!e.download){const i={src:e.src,title:this.filesInfo[t].title,description:this.filesInfo[t].description};Object(k["a"])(i,({loaded:e,total:i})=>{const s=Math.round(100*e/i);this.changeProgressDownloadFile(t,s)},e=>{this.changeProgressDownloadFile(t,100),this.changeDownloadStatus(t,e.data.status)})}})}}},j=D,z=(i("5b4a"),Object(d["a"])(j,s,a,!1,null,"344f92cc",null));t["default"]=z.exports},"9b23":function(e,t,i){},"9d0b":function(e,t,i){"use strict";i("3612")},b50b:function(e,t,i){"use strict";i("ce0e")},ce0e:function(e,t,i){},d5cb:function(e,t,i){"use strict";i("6e26")},db1e:function(e,t,i){"use strict";i("23ff")}}]);